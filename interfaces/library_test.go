package interfaces

import (
	"bytes"
	"errors"
	"github.com/disintegration/imaging"
	"image"
	"projectServis/user_cases"
	"testing"

	"github.com/stretchr/testify/assert"
)

func TestName(t *testing.T) {
	// arrange
	cases := []struct {
		testName  string
		incomeImg user_cases.Image
		libImage  *LibraryImages
		wantErr   error
		wantImg   user_cases.Image
	}{
		{
			testName:  "Should return error if base64.StdEncoding.DecodeString returns error",
			incomeImg: user_cases.Image{Buffer: "name"},
			libImage: &LibraryImages{DecodeString: func(s string) ([]byte, error) {
				return nil, errors.New("DecodeString error")
			}},
			wantErr: errors.New("DecodeString error"),
			wantImg: user_cases.Image{},
		},

		{
			testName:  "Should return error if imaging.Decode returns error",
			incomeImg: user_cases.Image{},
			libImage: &LibraryImages{
				DecodeString: func(s string) ([]byte, error) {
					return nil, nil
				},
				Decode: func([]byte) (image.Image, error) {
					return nil, errors.New("Decode error")
				}},
			wantErr: errors.New("Decode error"),
			wantImg: user_cases.Image{},
		},

		{
			testName: "Should return error if imaging.Resize returns error",
			incomeImg: user_cases.Image{
				Id:     "1",
				Width:  259,
				Height: 194,
				Buffer: "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",
			},
			libImage: &LibraryImages{
				DecodeString: func(s string) ([]byte, error) {
					return []byte(s), nil
				},
				Decode: func(s []byte) (image.Image, error) {
					return nil, nil
				},
				Resize: func(img image.Image) image.Image {
					return img
				},
				Encode: func(*bytes.Buffer, image.Image, imaging.Format) error {
					return errors.New("Encode error")
				}},
			wantErr: errors.New("Encode error"),
			wantImg: user_cases.Image{
				//Id:     "1",
				//Width:  800,
				//Height: 600,
				//Buffer: "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",
			},
		},

		{
			testName:  "Should return error if imaging.Encode returns error",
			incomeImg: user_cases.Image{},
			libImage: &LibraryImages{
				DecodeString: func(s string) ([]byte, error) {
					return []byte(s), nil
				},
				Decode: func(s []byte) (image.Image, error) {
					return nil, nil
				},
				Resize: func(img image.Image) image.Image {
					return img
				},
				Encode: func(*bytes.Buffer, image.Image, imaging.Format) error {
					return errors.New("Encode error")
				}},
			wantErr: errors.New("Encode error"),
			wantImg: user_cases.Image{},
		},

		{
			testName:  "Should return error if base64.StdEncoding.EncodeToString returns error",
			incomeImg: user_cases.Image{},
			libImage: &LibraryImages{
				DecodeString: func(s string) ([]byte, error) {
					return nil, nil
				},
				Decode: func(s []byte) (image.Image, error) {
					return nil, nil
				},
				Resize: func(img image.Image) image.Image {
					return img
				},
				Encode: func(*bytes.Buffer, image.Image, imaging.Format) error {
					return nil
				},
				EncodeToString: func(src []byte) string {
					return string(src)
				}},
			wantErr: nil,
			wantImg: user_cases.Image{},
		},

		//{
		//	testName:  "Should return error if someimage returns empty image",
		//	incomeImg: user_cases.Image{},
		//	libImage: &LibraryImages{
		//		SomeImage: func(i interface{}) image.Image {
		//			return nil
		//		},
		//	},
		//	wantErr: nil,
		//	wantImg: user_cases.Image{},
		//},
	}
	for _, c := range cases {
		t.Run(c.testName, func(t *testing.T) {
			gotImg, gotError := c.libImage.ResizeImageLibrary(c.incomeImg)
			assert.Equal(t, c.wantErr, gotError)
			assert.Equal(t, c.wantImg, gotImg)
		})
	}
}
